# Even More Name Resolution

Okay, we're going back to the dumb-as-rocks outside-in approach.

Changes since last time:
1. Glob imports are gone, since they make name resolution irritating and
can introduce ambiguity.
2. `pub use <module>` declarations (i.e. _retopologies_) are illegal, since
they can cause cycles in the name graph.

With these changes, it's now possible to accumulate all top-level names in
a single pass, which can then be used to resolve paths when they appear, rather
than deferring them all to a later stage.

The `ast::unbound_lowered` module provides an intermediate stage before the
`ast::bound::Ast` is constructed, where we can split declarations into their
appropriate namespaces and flatten imports. The step immediately after this is
to intern all these names and build a _global_ name tree with leaves containing
indices that point into the `env::Env` tables. This will also require special
handling for type constructors, both in terms of opacity and in the particular
case of singular pun-constructors.

The algorithm for doing "regular" name resolution (e.g. in function bodies) is
largely obvious, and not super interesting from an implementation perspective.
Since paths will be completely resolveable in this stage, we don't need to deal
with any fix-point shenanigans and can just use a regular recursive descent
approach.

Quick footnote: I'm debating desugaring blocks and statements entirely into a
`let ... in ...` construct, since this makes the AST simpler and reflects the
kind of core language that I want to produce.
